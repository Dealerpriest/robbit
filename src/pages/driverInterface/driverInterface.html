<ion-header>

  <ion-navbar>
    <ion-title>Elev</ion-title>
    <!-- <button (click)="changeCamera()" class="driver-nav-button">
      <ion-icon name="repeat"></ion-icon>
    </button>
    <button class="driver-nav-button">
      <ion-icon name="git-compare" (click)="this.videoVerticalFlipped=!this.videoVerticalFlipped"></ion-icon>
    </button> -->
    <button (click)="endCall()" id="end-call-button" *ngIf="this.videoLinkActive">
      <ion-icon name="call"></ion-icon>
    </button>
    <button (click)="this.toggleCameraStream()" id="toggle-camera-button" *ngIf="this.videoLinkActive" [class.toggle-button-enabled]="this.showCamera" [class.toggle-button-disabled]="!this.showCamera">
      <ion-icon name="videocam"></ion-icon>
    </button>
    <button (click)="this.toggleAudioStream()" id="toggle-audio-button" *ngIf="this.videoLinkActive" [class.toggle-button-enabled]="!this.muteAudio" [class.toggle-button-disabled]="this.muteAudio">
      <ion-icon name="mic"></ion-icon>
    </button>
    <button (click)="this.toggleParking()" id="toggle-park-button" *ngIf="this.videoLinkActive" [class.toggle-button-enabled]="!this.isParked" [class.toggle-button-disabled]="this.isParked">
      <ion-icon name="move"></ion-icon>
      <ion-icon name="lock" [hidden]="!isParked"></ion-icon>
      <ion-icon name="unlock" [hidden]="isParked"></ion-icon>
    </button>
  </ion-navbar>
</ion-header>

<ion-content padding>
  <div id="call-button" *ngIf="!this.videoLinkActive" [class.ready-to-call]="!this.videoLinkWaitingForAnswer" [class.waiting-for-answer]="this.videoLinkWaitingForAnswer">
    <button (click)="initiateCall()" [disabled]="this.videoLinkWaitingForAnswer">
      <ion-icon name="call"></ion-icon>
    </button>
  </div>
  <video [style.display]="this.videoLinkActive ?  'block': 'none'" id="driver-remote-video" autoplay [class.video-vertical-flip]="this.videoVerticalFlipped">
  </video>
  <!-- <video id="driver-remote-video" autoplay>
  </video> -->
  <video id="driver-local-video" autoplay>
  </video>
  <button (click)="this.presentEmojiPopover($event)" class="choose-emoji-button" [innerHTML]="this.currentEmoji" [hidden]="!this.videoLinkActive || this.showCamera">
  </button>
  <div id="chat" [hidden]="!this.videoLinkActive" [class.hidden-chat]="!this.chat.isShown" [innerHTML]="chat.sendText" (click)="this.clearChat()"></div>
  <div id="control-panel" [class.invisible]="!this.videoLinkActive">
    <button ion-button id="forward-button" class="drive-button" (mousedown)="forwardActive = true" (mouseup)="forwardActive = false" [hidden]="isParked">
      <ion-icon name="arrow-round-up"></ion-icon>
    </button>
    <button ion-button id="reverse-button" class="drive-button" (mousedown)="reverseActive = true" (mouseup)="reverseActive = false" [hidden]="isParked">
      <ion-icon name="arrow-round-down"></ion-icon>
    </button>
    <div id="chat-container" >
      <form (submit)="this.sendChat()">
        <ion-input id="chat-input" #chatInput placeholder="säg något.." clearInput [(ngModel)]="chat.text" [ngModelOptions]="{standalone: true}" [class.is-writing]="chat.text!=''" ></ion-input>
        <button ion-button  id="chat-send" >
          <ion-icon name="send"></ion-icon>
        </button>
      </form>
    </div>
    <div id="zone-joystick"></div>
  </div>
</ion-content>
